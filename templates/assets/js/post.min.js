(()=>{"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var e=function(){function t(){var e;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");ThemeConfig.code.enable&&(e=$(".render-html pre")).length&&e.each(function(){const n=$(this),e=n.next(".toolbar");var t;e&&(e.append('<div class="custom-item absolute top-0"></div>'),t=e.find(".custom-item"),ThemeConfig.code.enable_title&&e.addClass("c-title"),ThemeConfig.code.enable_hr&&e.addClass("c-hr"),ThemeConfig.code.enable_expander&&(t.append('<i class="fa-sharp fa-solid fa-caret-down code-expander cursor-pointer"></i>'),t.find(".code-expander").on("click",function(){n.children("code").toggle(30),e.toggleClass("c-expander")})),ThemeConfig.code.enable_copy)&&(t.append('<i class="fa-solid fa-book-copy code-copy cursor-pointer"></i>'),t.find(".code-copy").on("click",function(e){const t=n.children("code[class*='language-']").text(),o=new ClipboardJS(this,{text:()=>t});o.on("success",()=>{Qmsg.success("文章链接已复制"),o.destroy()}),o.on("error",()=>{o.destroy()}),o.onClick(e)}))}),window.tocbot.init({tocSelector:".post-tocbot > .toc",contentSelector:".render-html",headingSelector:"h1, h2, h3, h4, h5, h6",hasInnerContainers:!0,scrollSmooth:!0,includeTitleTags:!0,scrollSmoothDuration:280,throttleTimeout:30,headingsOffset:80,scrollSmoothOffset:-80,fixedSidebarOffset:"auto",disableTocScrollSync:!1,onClick:function(e){e.preventDefault()},scrollEndCallback:function(e){}}),0<ThemeConfig.post.out_date&&this.outDate(),this.fancyBoxImg(),this.copyPermalink(),this.copyRightPermalinkDecode(),this.showTocbot()}for(var e,o=t,n=o.prototype,r=[{key:"outDate",value:function(){var e,t,o,n=GlobalClass.Butterfly.find(".post-outDate");n.length&&(o=Number(n.attr("data-outDate")),e=n.attr("data-publishTime"),e=new Date(e),t=new Date,o<(o=Math.floor((t-e)/864e5)))&&(n.html("距离上次更新已经过了 ".concat(o," 天，文中部分内容可能已经过时，如有疑问，请在下方留言。")),n.removeClass("none"))}},{key:"copyRightPermalinkDecode",value:function(){var e=$(".post-copyRight .permalink");e.length&&e.html(decodeURIComponent(e.html()))}},{key:"fancyBoxImg",value:function(){var e=$(".render-html img");e.length&&e.each(function(){var e=$(this);e.attr("width",""),e.attr("height",""),e.wrap($('<span class="block text-center w-100" data-fancybox="post" href="'.concat(e.attr("src"),'" ></span>')))})}},{key:"copyPermalink",value:function(){var e=$(".post-support .share .copy-permalink");e.length&&e.on("click",function(e){var t=new ClipboardJS(this,{text:function(){return location.href}});t.on("success",function(){Qmsg.success("文章链接已复制"),t.destroy()}),t.on("error",function(){t.destroy()}),t.onClick(e)})}},{key:"showTocbot",value:function(){var e=$(".adsorption > .show-tocbot");e.length&&(e.on("click",function(){var e=$(".aside > .post-tocbot");e.attr("style")&&console.log(111),e.css({display:"block",animation:"0.3s ease 0s 1 normal none running toc-open"})}),console.log(e))}}],c=0;c<r.length;c++){var a=r[c];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,(e=function(e){if("object"!==i(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!==i(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(a.key),"symbol"===i(e)?e:String(e)),a)}return Object.defineProperty(o,"prototype",{writable:!1}),t}();document.addEventListener("DOMContentLoaded",function(){return window.PostClass=new e})})();