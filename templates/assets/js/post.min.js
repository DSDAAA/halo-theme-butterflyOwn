(()=>{"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var t=function(){function e(){var t;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");(t=$(".render-html pre")).length&&t.each(function(){const n=$(this),t=n.next(".toolbar");var e;t&&(t.append('<div class="custom-item absolute top-0"></div>'),(e=t.find(".custom-item")).append('<i class="fa-sharp fa-solid fa-caret-down code-expander cursor-pointer"></i>'),e.find(".code-expander").on("click",function(){n.children("code").toggle(100)}),e.append('<i class="fa-solid fa-book-copy code-copy cursor-pointer"></i>'),e.find(".code-copy").on("click",function(t){const e=n.children("code[class*='language-']").text(),o=new ClipboardJS(this,{text:()=>e});o.on("success",()=>{Qmsg.success("文章链接已复制"),o.destroy()}),o.on("error",()=>{o.destroy()}),o.onClick(t)}))}),this.outDate(),this.initToc(),this.fancyBoxImg(),this.copyPermalink(),this.copyRightPermalinkDecode()}for(var t,o=e,n=o.prototype,r=[{key:"outDate",value:function(){var t,e,o,n=GlobalClass.Butterfly.find(".post-outDate");n.length&&(o=Number(n.attr("data-outDate")),t=n.attr("data-publishTime"),t=new Date(t),e=new Date,o<(o=Math.floor((e-t)/864e5)))&&(n.html("距离上次更新已经过了 ".concat(o," 天，文中部分内容可能已经过时，如有疑问，请在下方留言。")),n.removeClass("none"))}},{key:"initToc",value:function(){window.tocbot.init({tocSelector:".toc-bot > .toc",contentSelector:".render-html",headingSelector:"h1, h2, h3, h4, h5, h6",hasInnerContainers:!0,scrollSmooth:!0,includeTitleTags:!0,scrollSmoothDuration:280,throttleTimeout:30,headingsOffset:80,scrollSmoothOffset:-80,fixedSidebarOffset:"auto",disableTocScrollSync:!1,onClick:function(t){t.preventDefault()},scrollEndCallback:function(t){}})}},{key:"copyRightPermalinkDecode",value:function(){var t=$(".copyRight .permalink");t.length&&t.html(decodeURIComponent(t.html()))}},{key:"fancyBoxImg",value:function(){var t=$(".render-html img");t.length&&t.each(function(){var t=$(this);t.attr("width",""),t.attr("height",""),t.wrap($('<span class="block text-center w-100" data-fancybox="post" href="'.concat(t.attr("src"),'" ></span>')))})}},{key:"copyPermalink",value:function(){var t=$(".share .copy-permalink");t.length&&t.on("click",function(t){var e=new ClipboardJS(this,{text:function(){return location.href}});e.on("success",function(){Qmsg.success("文章链接已复制"),e.destroy()}),e.on("error",function(){e.destroy()}),e.onClick(t)})}}],i=0;i<r.length;i++){var c=r[i];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(n,(t=function(t){if("object"!==a(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return String(t);e=e.call(t,"string");if("object"!==a(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}(c.key),"symbol"===a(t)?t:String(t)),c)}return Object.defineProperty(o,"prototype",{writable:!1}),e}();document.addEventListener("DOMContentLoaded",function(){return window.PostClass=new t})})();