"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}var Utils=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"debounce",value:function(n,l,i){var s;return function(){var t=this,e=arguments,a=i&&!s;clearTimeout(s),s=setTimeout(function(){s=null,i||n.apply(t,e)},l),a&&n.apply(t,e)}}},{key:"throttle",value:function(a,n,l){function i(){u=!1===l.leading?0:(new Date).getTime(),s=null,a.apply(r,o),r=o=null}var s,r,o,u=0;l=l||{};return function(){var t=(new Date).getTime(),e=(u||!1!==l.leading||(u=t),n-(t-u));r=this,o=arguments,e<=0||n<e?(s&&(clearTimeout(s),s=null),u=t,a.apply(r,o),s||(r=o=null)):s||!1===l.leading||(s=setTimeout(i,e))}}},{key:"constructor",value:function(){}},{key:"msg",value:function(t){}}]),t}(),Global=function(){function t(){_classCallCheck(this,t),this.html=$("html"),this.body=$("body"),this.Butterfly=$("#Butterfly"),this.Header=this.Butterfly.find(".header"),this.init(),this.pjax(),this.nav(),this.scroll(),this.runDay(),this.adsorption()}return _createClass(t,[{key:"init",value:function(){var t=localStorage.getItem("Butterfly-data-theme");t&&this.html.attr("data-theme",t),window.lazyLoadInstance=new LazyLoad({elements_selector:"img",threshold:0,data_src:"lazy-src"})}},{key:"starrySky",value:function(t){}},{key:"pjax",value:function(){}},{key:"nav",value:function(){}},{key:"scroll",value:function(){var e=this.Header.find(".nav"),a=this.Butterfly.children(".adsorption"),n=0;window.addEventListener("scroll",Utils.throttle(function(){var t=document.documentElement.scrollTop;56<t?(n<=t?(e.hasClass("visible")&&(e.addClass("hidden"),e.removeClass("visible")),a.hasClass("active")||a.addClass("active")):e.hasClass("visible")||(e.addClass("visible"),e.removeClass("hidden")),e.hasClass("style")||e.addClass("style")):0===t&&(e.removeClass("style visible hidden"),a.hasClass("active"))&&a.removeClass("active"),n=t},150))}},{key:"runDay",value:function(){var t,e=this.Butterfly.find(".run-day");e&&e.attr("data-runDay")&&("Invalid Date"===(t=new Date).toString()?e.html('<span style="color:#fd0000">建站时间配置错误</span>'):(t=(new Date).getTime()-t.getTime(),t=parseInt((t/864e5).toString()),e.html(t+" 天")))}},{key:"adsorption",value:function(){var t,e=this;(t=this.Butterfly.find(".adsorption")).find(".switch-model").on("click",function(){"light"===localStorage.getItem("Butterfly-data-theme")?(e.html.attr("data-theme","dark"),localStorage.setItem("Butterfly-data-theme","dark"),e.starrySky("open")):(e.html.attr("data-theme","light"),localStorage.setItem("Butterfly-data-theme","light"),e.starrySky("close"))}),t.find(".back-top").on("click",function(){e.html.animate({scrollTop:0},300)})}}]),t}();document.addEventListener("DOMContentLoaded",function(){return window.GlobalClass=new Global});