"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,_toPropertyKey(a.key),a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}var Utils=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"debounce",value:function(a,i,l){var o;return function(){var t=this,e=arguments,n=l&&!o;clearTimeout(o),o=setTimeout(function(){o=null,l||a.apply(t,e)},i),n&&a.apply(t,e)}}},{key:"throttle",value:function(n,a,i){function l(){u=!1===i.leading?0:(new Date).getTime(),o=null,n.apply(r,s),r=s=null}var o,r,s,u=0;i=i||{};return function(){var t=(new Date).getTime(),e=(u||!1!==i.leading||(u=t),a-(t-u));r=this,s=arguments,e<=0||a<e?(o&&(clearTimeout(o),o=null),u=t,n.apply(r,s),o||(r=s=null)):o||!1===i.leading||(o=setTimeout(l,e))}}},{key:"constructor",value:function(){}},{key:"msg",value:function(t){}}]),t}(),Global=function(){function t(){_classCallCheck(this,t),this.html=$("html"),this.body=$("body"),this.Butterfly=$("#Butterfly"),this.Header=this.Butterfly.find(".header"),this.init(),this.pjax(),this.nav(),this.scroll(),this.runDay(),this.adsorption()}return _createClass(t,[{key:"init",value:function(){var t=localStorage.getItem("Butterfly-data-theme");t&&this.html.attr("data-theme",t),window.lazyLoadInstance=new LazyLoad({elements_selector:"img",threshold:0,data_src:"lazy-src"})}},{key:"starrySky",value:function(t){}},{key:"pjax",value:function(){}},{key:"nav",value:function(){}},{key:"scroll",value:function(){var e=this.Header.find(".nav"),n=this.Butterfly.children(".adsorption"),a=this.body.find(".post .aside .toc-bot"),i=0;window.addEventListener("scroll",Utils.throttle(function(){var t=document.documentElement.scrollTop;56<t?(i<=t?(e.hasClass("visible")&&(e.addClass("hidden"),e.removeClass("visible")),a&&a.attr("style",""),n.hasClass("active")||n.addClass("active")):(e.hasClass("visible")||(e.addClass("visible"),e.removeClass("hidden")),a&&a.css("top","70px")),e.hasClass("style")||e.addClass("style")):0===t&&(e.removeClass("style visible hidden"),n.hasClass("active"))&&n.removeClass("active"),i=t},150))}},{key:"runDay",value:function(){var t,e=this.Butterfly.find(".run-day");e&&e.attr("data-runDay")&&("Invalid Date"===(t=new Date).toString()?e.html('<span style="color:#fd0000">建站时间配置错误</span>'):(t=(new Date).getTime()-t.getTime(),t=parseInt((t/864e5).toString()),e.html(t+" 天")))}},{key:"adsorption",value:function(){var t,e=this;(t=this.Butterfly.find(".adsorption")).find(".switch-model").on("click",function(){"light"===localStorage.getItem("Butterfly-data-theme")?(e.html.attr("data-theme","dark"),localStorage.setItem("Butterfly-data-theme","dark"),e.starrySky("open")):(e.html.attr("data-theme","light"),localStorage.setItem("Butterfly-data-theme","light"),e.starrySky("close"))}),t.find(".back-top").on("click",function(){e.html.animate({scrollTop:0},300)})}}]),t}();document.addEventListener("DOMContentLoaded",function(){return window.GlobalClass=new Global});